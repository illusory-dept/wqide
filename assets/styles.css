:root {
  --page-top-1: #2f76b9;
  --page-top-2: #2a6aa8;
  --tab-mint: #7fffe0;
  --bg: #d7e9f6;
  --panel-1: #33b9ff;
  --panel-2: #22a8f1;
  --panel-edge: #ffffff26;
  --panel-inner: #00000012;
  --text: #f7feff;
  --text-muted: #e9fbff;
  --code-bg: #00000022;
  --shadow:
    0 14px 24px rgba(19, 78, 110, 0.18), 0 2px 6px rgba(19, 78, 110, 0.1);
  --radius: 16px;
  --maxw: 980px;
  --header-h: 140px; /* updated at runtime */
}
* {
  box-sizing: border-box;
}
html,
body {
  height: auto;
  min-height: 100%;
}
body {
  margin: 0;
  padding-top: var(--header-h);
  font-family:
    system-ui,
    -apple-system,
    Segoe UI,
    Roboto,
    Helvetica,
    Arial;
  background: var(--bg);
  color: #033b57;
}

.topbar {
  z-index: 1000;
  background: linear-gradient(0deg, var(--page-top-2), var(--page-top-1));
  color: #dff4ff;
  padding: 24px 20px 10px;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 20;
  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.2) inset;
  overflow: visible;
}
.topbar-row {
  max-width: var(--maxw);
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}
.brand {
  max-width: var(--maxw);
  margin: 0 auto;
  font-weight: 800;
  font-size: 30px;
  color: #dff4ff;
}

/* Pillbar: scrollable container for pill buttons/text */
.pillbar {
  flex: 1;
  display: flex;
  justify-content: flex-end;
  min-height: 36px;
  overflow: hidden; /* hide outer overflow; inner shows scrollbar */
}
.pills {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  overflow-x: auto;
  overflow-y: hidden;
  max-width: 100%;
  white-space: nowrap;
  -webkit-overflow-scrolling: touch;
  scrollbar-gutter: stable both-edges;
}
.pill,
.theme-toggle {
  font-size: 11px;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  border: 0;
  padding: 8px 12px;
  border-radius: 999px;
  font-weight: 700;
  cursor: pointer;
  background: #0b4060;
  color: #fff;
  white-space: nowrap;
}

.tabs {
  display: grid;
  /* Keep tabs on a single row and divide space equally regardless of count */
  grid-template-columns: repeat(auto-fit, minmax(0, 1fr));
  max-width: var(--maxw);
  margin: 14px auto 0;
}
.tabs a {
  text-decoration: none;
  color: #9cfbe7;
  opacity: 0.8;
  text-align: center;
  font-weight: 700;
  font-size: 18px;
  padding: 14px 6px 16px;
  position: relative;
  user-select: none;
}
.tabs a:hover {
  opacity: 1;
}
.tabs a[aria-current="page"] {
  color: var(--tab-mint);
  opacity: 1;
}
.tabs a[aria-current="page"]::after {
  content: "";
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: 0;
  width: 74px;
  height: 4px;
  border-radius: 4px;
  background: var(--tab-mint);
  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.08) inset;
}

.wrap {
  max-width: var(--maxw);
  margin: 34px auto 60px;
  padding: 0 20px;
}
.divider {
  height: 1px;
  background: rgba(22, 70, 100, 0.18);
  margin: 8px 0 22px;
}

/* cards */
.card {
  border: 2px solid #8aeaff;
  background-color: var(--panel-2);
  /*background: linear-gradient(0deg, var(--panel-2), var(--panel-1));*/
  border-radius: var(--radius);
  padding: 26px 26px 28px;
  color: var(--text);
  /*box-shadow: var(--shadow);*/
  position: relative;
  margin: 22px 0 36px;
  /*transition:*/
  /*transform 0.08s ease,*/
  /*box-shadow 0.2s ease;*/
}

.card::before {
  content: "";
  position: absolute;
  inset: 10px;
  /*border-radius: calc(var(--radius) - 8px);*/
  /*box-shadow:*/
  /*inset 0 1px 0 var(--panel-edge),*/
  /*inset 0 0 0 1px var(--panel-edge),*/
  /*inset 0 -10px 18px var(--panel-inner);*/
  pointer-events: none;
}
.card h2 {
  margin: 0 0 12px;
  font-size: 28px;
  color: #fff;
}
.card p {
  margin: 0 0 16px;
  font-size: 18px;
  line-height: 1.5;
  color: var(--text-muted);
}
.card .code {
  display: block;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  /*background: var(--code-bg);*/
  /*border: 1px solid rgba(255, 255, 255, 0.28);*/
  padding: 8px 0;
  /*border-radius: 12px;*/
  color: #fff;
  white-space: pre;
  font-size: 14px;
}
.card a.stretched {
  position: absolute;
  inset: 0;
  border-radius: inherit;
  text-indent: -9999px;
}

/* breadcrumbs and folder header */
.breadcrumbs {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 600;
  color: #0b4060;
  margin-bottom: 18px;
}
.breadcrumbs a {
  color: #0b4060;
  text-decoration: none;
}
.breadcrumbs .sep {
  opacity: 0.6;
}
.folder-head {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 6px;
}
.folder-head .icon {
  font-size: 22px;
}
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
  gap: 18px;
}

/* edge buttons for tab cycling (below header only) */
.edge {
  position: fixed;
  left: 0;
  right: auto;
  top: var(--header-h);
  bottom: 0;
  width: 10vw;
  min-width: 44px;
  z-index: 6;
  cursor: pointer;
  background: transparent;
  border: 0;
  outline: none;
  appearance: none;
  -webkit-appearance: none;
}
.edge.right {
  left: auto;
  right: 0;
}
.edge:focus {
  outline: none;
}
.edge:focus-visible {
  box-shadow:
    inset 0 0 0 2px #fff8,
    inset 0 0 0 4px #0006;
}
.edge::-moz-focus-inner {
  border: 0;
}

/* Playground editor */
.editor {
  background: #f6fbff;
  border: 1px solid #cfe6f6;
  border-radius: 14px;
  overflow: visible;
  /*box-shadow: 0 6px 14px rgba(20, 60, 100, 0.08);*/
}

.repl {
  background: #f6fbff;
  border: 1px solid #cfe6f6;
  border-radius: 14px;
  overflow: hidden;
  /*box-shadow: 0 6px 14px rgba(20, 60, 100, 0.08);*/
  color: #0b4060;
}
.repl .headbar {
  position: sticky;
  top: 8px;
  border-bottom: 1px solid #cfe6f6;
}
.repl .repl-split {
  display: flex;
  gap: 0;
  min-height: 360px;
}
.repl .codepane {
  display: flex;
  flex-direction: column;
}
.repl .codepane.left {
  flex: 0 0 44%;
  /*border-right: 1px solid #cfe6f6;*/
}
.repl .codepane.right {
  flex: 1 1 auto;
}
.repl .codebar {
  position: sticky;
  /* Align with other toolbars and leave gap under header */
  top: 8px;
}
.repl #term.run-output {
  flex: 1 1 auto;
  margin: 0;
  border-radius: 0;
}
.toolbar {
  position: sticky;
  top: 8px;
  background: #f6fbff;
  border-bottom: 1px solid #cfe6f6;
  border-radius: 14px 14px 0 0;
  display: flex;
  gap: 12px;
  align-items: center;
  padding: 10px 12px;
  z-index: 2;
}
.toolbar.inner {
  /* inner bars (e.g., REPL codebar) */
  top: 8px;
  border-radius: 0;
}
.toolbar.flat {
  /* no rounded corners (e.g., REPL terminal bar) */
  border-radius: 0;
}
.toolbar .btn {
  border: 0;
  padding: 10px 14px;
  border-radius: 999px;
  font-weight: 700;
  cursor: pointer;
  background: hotpink;
  color: white;
  /*box-shadow: 0 2px 0 rgba(0, 0, 0, 0.12) inset;*/
}
.toolbar .btn.primary {
  background: #7a2a6b;
}
/*.toolbar .btn:active {
}*/
.toolbar .mini {
  font-size: 12px;
  opacity: 0.8;
  text-wrap: balance;
}
.toolbar .stdin {
  flex: 1;
  display: flex;
  gap: 8px;
  align-items: center;
}
.toolbar input[type="text"] {
  width: 100%;
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid #cfe6f6;
  background: white;
  font-family: inherit;
  outline: none;
}
.toolbar input[type="text"]:focus {
  border: 1px solid hotpink;
}

/* editor area */
.editor-area {
  display: grid;
  grid-template-columns: 56px 1fr;
  min-height: 340px;
  /* When there is no output, round inner bottom corners so
     the white editor area and gutter clip to the card radius */
  border-bottom-left-radius: 14px;
  border-bottom-right-radius: 14px;
  overflow: hidden;
}
.gutter {
  background: #eaf5ff;
  border-right: 1px solid #d7ebfb;
  padding: 10px 6px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  color: #5a86a6;
  text-align: right;
  user-select: none;
  overflow: visible;
}
.gutter .ln {
  height: 22px;
  line-height: 22px;
}
.codepane {
  position: relative;
  overflow: auto;
}
textarea.editor-text {
  width: 100%;
  height: 100%;
  min-height: 340px;
  resize: none;
  border: 0;
  outline: 0;
  padding: 10px 12px;
  font-size: 14px;
  line-height: 22px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  background: white;
  color: #0b4060;
}

/* When output is shown, square off the editor area's bottom so
   the radius is only at the overall card bottom */
.editor.has-output .editor-area {
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;
}
.run-output {
  /* Acts as an inner divider with dashed top; outer border stays on container */
  border-top: 1px dashed #cfe6f6;
  margin: 0;
  padding: 10px 12px;
  background: #ffffff;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  color: #0b4060;
  white-space: pre-wrap; /* wrap long lines */
  overflow: auto; /* scroll when needed */
  word-break: break-word; /* avoid overflow on long tokens */
  min-height: 0; /* allow flex children to not overflow containers */
  max-height: 400px;
  border-radius: 0 0 14px 14px;
}
.run-output:empty {
  display: none;
}
.info-doc {
  background: white;
  border: 1px solid #cfe6f6;
  border-radius: 14px;
  /*box-shadow: 0 6px 14px rgba(20, 60, 100, 0.08);*/
  padding: 20px;
}
.info-doc h2 {
  margin-top: 0;
}
@media (max-width: 560px) {
  .brand {
    font-size: 26px;
  }
}

/* --- Tutorial layout --- */
.layout-3col {
  display: grid;
  grid-template-columns: 240px 1fr;
  gap: 20px;
}
.layout-3col > * {
  min-width: 0;
}
.left-rail,
.right-rail {
  position: relative;
}
.left-rail .sticky,
.right-rail .sticky {
  position: sticky;
  top: calc(var(--header-h) + 12px);
}
.outline {
  background: #ffffff;
  border: 1px solid #cfe6f6;
  border-radius: 22px;
  padding: 12px;
  /*box-shadow: 0 6px 14px rgba(20, 60, 100, 0.06);*/
}
.outline h3 {
  margin: 6px 0 8px;
  font-size: 14px;
  color: #0b4060;
  letter-spacing: 0.3px;
}
.outline a {
  display: block;
  padding: 6px 8px;
  border-radius: 8px;
  color: #2b5870;
  text-decoration: none;
  font-size: 14px;
}
.outline a.active {
  background: #dbefff;
  color: #0b4060;
  font-weight: 700;
}
.outline .sub {
  padding-left: 18px;
  font-size: 13px;
}

.article {
  background: #ffffff;
  border: 1px solid #cfe6f6;
  border-radius: 22px;
  /*box-shadow: 0 6px 14px rgba(20, 60, 100, 0.08);*/
  padding: 26px;
  color: #0b4060;
  min-width: 0; /* allow grid child to shrink and not overflow */
}
.article h1 {
  margin-top: 0;
  font-size: 28px;
}
.article h2 {
  margin-top: 28px;
  font-size: 22px;
}
.article p {
  line-height: 1.8;
  font-size: 16px;
}
.article strong {
  color: #e11d48;
  font-weight: 800;
}
.article em {
  color: #2563eb;
  /*color: midnightblue;*/
  font-style: normal;
  text-decoration-line: underline;
  text-decoration-style: wavy;
}
.article li {
  margin-top: 14px;
  line-height: 1.5;
}
.article ul {
  list-style: none;
  padding-left: 0;
}

.article ul li::before {
  content: "★";
  color: hotpink;
  margin-right: 8px;
}

.article ol {
  /*list-style: none;*/
  list-style-position: inside;
  padding-left: 0;
}

.article a {
  color: hotpink;
  text-decoration: underline;
}

.right-rail .support {
  background: #f7fcff;
  border: 1px solid #cfe6f6;
  border-radius: 12px;
  padding: 14px;
  /*box-shadow: 0 6px 14px rgba(20, 60, 100, 0.06);*/
}
.support h3 {
  margin: 6px 0 8px;
}
.support .btn {
  display: inline-block;
  margin-top: 8px;
  border: 0;
  padding: 10px 12px;
  border-radius: 10px;
  font-weight: 700;
  cursor: pointer;
  background: #2aa8f1;
  color: white;
  text-decoration: none;
}

.mobile-outline {
  display: none;
}
@media (max-width: 1100px) {
  .layout-3col {
    grid-template-columns: 220px 1fr;
  }
  .right-rail {
    display: none;
  }
}
@media (max-width: 820px) {
  .layout-3col {
    grid-template-columns: 1fr;
  }
  .left-rail {
    display: none;
  }
  /* Show a mobile outline drop-down at top of article */
  .mobile-outline {
    display: block;
    margin-bottom: 12px;
    background: white;
    border: 1px solid #cfe6f6;
    border-radius: 12px;
    overflow: hidden;
  }
  .mobile-outline summary {
    cursor: pointer;
    padding: 12px 14px;
    font-weight: 700;
    color: #0b4060;
    list-style: none;
  }
  .mobile-outline[open] summary {
    border-bottom: 1px solid #cfe6f6;
  }
  .mobile-outline a {
    display: block;
    padding: 10px 14px;
    text-decoration: none;
    color: #2b5870;
  }
  .mobile-outline a + a {
    border-top: 1px dashed #e2eef9;
  }
}

/* card hover border color */
.card:hover {
  /*border-color: #8aeaff;*/
  border-color: hotpink;
}

/* remove right-rail on wide screens */
.right-rail {
  display: none;
}

/* mobile-outline hidden by default */
.mobile-outline {
  display: none;
}

/* code block style */
.code-wrapper {
  margin: 16px 0;
  border: 1px solid #b5e6b5;
  border-radius: 12px;
  background: #e8ffe8;
  overflow: hidden;
  max-width: 100%;
  width: 100%;
  box-sizing: border-box;
}
.code-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 10px;
  background: #d4fcd4;
  border-bottom: 1px solid #b5e6b5;
}
.code-header .lang {
  font-weight: 700;
  font-size: 12px;
  color: #000;
  opacity: 1;
}
.code-actions {
  display: flex;
  gap: 8px;
}
.article pre {
  background: transparent;
  color: #111;
  border: 0;
  margin: 0;
  border-radius: 0;
  box-shadow: none;
  max-width: 100%;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}
.article pre code {
  display: block;
  padding: 14px 16px;
  color: #000;
  background: transparent;
  border: 0;
}
.article code {
  background: #e6f8e6;
  border: 1px solid #bfe8bf;
  color: #000;
  line-height: 1.4;
  padding: 0.1em 0.35em;
  margin: auto 4px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
}
.copy-btn {
  position: static;
  font-size: 12px;
  border: 0;
  padding: 6px 10px;
  border-radius: 8px;
  cursor: pointer;
  background: #c9f5c9;
  border: 1px solid #b5e6b5;
  color: #063a0c;
}
.copy-btn:hover {
  background: #bdf0bd;
}
/*.copy-btn.copied {
}*/

/* Markdown tables inside articles */
.article table {
  width: 100%;
  border-collapse: collapse;
  border-spacing: 0;
  margin: 16px 0 20px;
  background: #ffffff;
  border: 1px solid #cfe6f6;
  border-radius: 12px;
  overflow: hidden;
}
.article thead th {
  background: #eaf5ff;
  color: #0b4060;
  text-align: left;
  font-weight: 700;
  border-bottom: 1px solid #cfe6f6;
}
.article th,
.article td {
  padding: 10px 12px;
  border-right: 1px solid #e1effa;
}
.article tr th:last-child,
.article tr td:last-child {
  border-right: 0;
}
.article tbody tr:nth-child(odd) td {
  background: #f8fcff;
}
.article tbody tr:nth-child(even) td {
  background: #ffffff;
}

/* Inline run result panel after code blocks */
.run-result {
  margin: 10px 0 18px;
  border: 1px solid #b5e6b5;
  border-radius: 12px;
  background: #e8ffe8;
  overflow: hidden;
  max-width: 100%;
  width: 100%;
  box-sizing: border-box;
}
.run-result .run-head {
  padding: 6px 10px;
  background: #d4fcd4;
  border-bottom: 1px solid #b5e6b5;
  border-top: 1px solid #b5e6b5;
  font-weight: 700;
  font-size: 12px;
  color: #000;
}
.run-result pre {
  margin: 0;
  max-width: 100%;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}
.run-result pre code {
  display: block;
  padding: 14px 16px;
  background: transparent;
  color: #0b2a0b;
}

/* Visually connect run-result to preceding code block */
.code-wrapper + .run-result {
  margin-top: 0;
  border-top: 0;
  border-top-left-radius: 0;
  border-top-right-radius: 0;
}
.code-wrapper.attached {
  border-bottom: 0;
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;
  margin-bottom: 0;
}
.code-wrapper + .run-result .run-head {
  border-top-left-radius: 0;
  border-top-right-radius: 0;
}

.layout-2col {
  display: grid;
  grid-template-columns: 240px 1fr;
  gap: 20px;
}
@media (max-width: 1100px) {
  .layout-2col {
    grid-template-columns: 220px 1fr;
  }
}
@media (max-width: 820px) {
  .layout-2col {
    grid-template-columns: 1fr;
  }
  .left-rail {
    display: none;
  }
}

/* Theme toggle adopts .pill visuals via selector above */

/* Dark theme overrides */
html[data-theme="dark"] body {
  background: #0b1e2b;
  color: #e6f3ff;
}
html[data-theme="dark"] .brand {
  color: #e6f3ff;
}
html[data-theme="dark"] .tabs a {
  color: #b7ffe9;
}
html[data-theme="dark"] .tabs a[aria-current="page"] {
  color: #7fffe0;
}
html[data-theme="dark"] .breadcrumbs,
html[data-theme="dark"] .breadcrumbs a {
  color: #cfe6f6;
}
html[data-theme="dark"] .card {
  background-color: #134463;
  border-color: #5bd8ff;
  color: #f0fbff;
}
html[data-theme="dark"] .card:hover {
  border-color: hotpink;
}
html[data-theme="dark"] .card p {
  color: #e0f6ff;
}
html[data-theme="dark"] .article {
  background: #0f2736;
  color: #e6f3ff;
  border-color: #1b4357;
}
html[data-theme="dark"] .outline {
  background: #0f2736;
  border-color: #1b4357;
  /*box-shadow: 0 6px 14px rgba(0, 0, 0, 0.3);*/
}
html[data-theme="dark"] .outline a.active {
  background: #14324a;
  color: #e6f3ff;
}
html[data-theme="dark"] .support {
  background: #0f2736;
  border-color: #1b4357;
}
html[data-theme="dark"] .article a {
  color: #ff7fb8;
}
html[data-theme="dark"] .code-wrapper {
  background: #0f351a;
  border-color: #1e6b33;
}
html[data-theme="dark"] .code-header {
  background: #154826;
  border-bottom-color: #1e6b33;
}
html[data-theme="dark"] .copy-btn {
  background: #154826;
  border: 1px solid #1e6b33;
  color: #e6f3ff;
}
html[data-theme="dark"] .copy-btn:hover {
  background: #1a5a31;
}
html[data-theme="dark"] .code-header .lang {
  color: #e6f3ff;
  opacity: 1;
}
html[data-theme="dark"] .article pre code {
  color: #e6f3ff;
}
html[data-theme="dark"] .article code {
  background: #0f351a;
  border-color: #1e6b33;
  color: #e6f3ff;
}
/* Tables (dark theme) */
html[data-theme="dark"] .article table {
  background: #0f2736;
  border-color: #1b4357;
}
html[data-theme="dark"] .article thead th {
  background: #14324a;
  color: #e6f3ff;
  border-bottom-color: #1b4357;
}
html[data-theme="dark"] .article th,
html[data-theme="dark"] .article td {
  border-right-color: #1b4357;
}
html[data-theme="dark"] .article tbody tr:nth-child(odd) td {
  background: #0e2a3b;
}
html[data-theme="dark"] .article tbody tr:nth-child(even) td {
  background: #0f2736;
}
html[data-theme="dark"] .pill,
html[data-theme="dark"] .theme-toggle {
  background: #7a2a6b;
}
html[data-theme="dark"] .run-result {
  background: #0f351a;
  border-color: #1e6b33;
}
html[data-theme="dark"] .run-result .run-head {
  background: #154826;
  border-color: #1e6b33;
  color: #e6f3ff;
}
html[data-theme="dark"] .run-result pre code {
  color: #e6f3ff;
}
/* Playground dark mode */
html[data-theme="dark"] .editor {
  background: #0f2736;
  border-color: #1b4357;
  /*box-shadow: 0 6px 14px rgba(0, 0, 0, 0.5);*/
}
/* REPL dark */
html[data-theme="dark"] .repl {
  background: #0f2736;
  border-color: #1b4357;
  color: #e6f3ff;
  /*box-shadow: 0 6px 14px rgba(0, 0, 0, 0.5);*/
}
html[data-theme="dark"] .toolbar {
  background: #0e2432;
  border-bottom-color: #1b4357;
}
html[data-theme="dark"] .toolbar .mini {
  color: #cfe6f6;
}
html[data-theme="dark"] .toolbar input[type="text"] {
  background: #0b1e2b;
  color: #e6f3ff;
  border-color: #1b4357;
}
html[data-theme="dark"] .gutter {
  background: #0f2432;
  border-right-color: #1b4357;
  color: #9cc7de;
}
html[data-theme="dark"] textarea.editor-text {
  background: #0b1e2b;
  color: #e6f3ff;
}
html[data-theme="dark"] .run-output {
  background: #0b1e2b;
  color: #e6f3ff;
  border-top: 1px dashed #1b4357;
}
html[data-theme="dark"] .article strong {
  color: #ff6fae;
}
html[data-theme="dark"] .article em {
  color: #4fd6e9;
}
html[data-theme="dark"] .outline a {
  color: #4fa3ff;
}
html[data-theme="dark"] .outline h3 {
  color: #2e80c9;
}
